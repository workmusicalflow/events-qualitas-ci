{# Section des partenaires #}
{% from "components/cards/partner_card.html.twig" import render as partner_card %}

<section class="py-16 bg-white" aria-labelledby="partners-title">
    <div class="container mx-auto px-4">
        {# En-tête #}
        <h2 id="partners-title" class="text-3xl font-bold text-center mb-12">
            <i class="fas fa-handshake mr-2 text-brand-blue"></i>
            <span>Nos Partenaires</span>
        </h2>

        {# Filtres des catégories #}
        <div x-data="{ activeCategory: 'all' }" class="mb-16">
            <div class="flex flex-wrap justify-center gap-3 mb-12" 
                 role="tablist">
                <button @click="activeCategory = 'all'"
                        :class="{ 'bg-brand-blue text-white': activeCategory === 'all', 'bg-gray-100 text-gray-700 hover:bg-gray-200': activeCategory !== 'all' }"
                        class="px-4 py-2 rounded-full font-medium transition-all duration-300"
                        role="tab"
                        aria-controls="all-partners"
                        :aria-selected="activeCategory === 'all'">
                    Tous
                </button>
                {% for category_key, category in partners.categories %}
                    <button @click="activeCategory = '{{ category_key }}'"
                            :class="{ 'bg-brand-blue text-white': activeCategory === '{{ category_key }}', 'bg-gray-100 text-gray-700 hover:bg-gray-200': activeCategory !== '{{ category_key }}' }"
                            class="px-4 py-2 rounded-full font-medium transition-all duration-300"
                            role="tab"
                            aria-controls="{{ category_key }}-partners"
                            :aria-selected="activeCategory === '{{ category_key }}'">
                        {{ category.name }}
                    </button>
                {% endfor %}
            </div>

            {# Grille des partenaires #}
            <div class="flex flex-wrap justify-center gap-6">
                {% for category_key, category in partners.categories %}
                    {% for partner in category.partners %}
                        <div x-show="activeCategory === 'all' || activeCategory === '{{ category_key }}'"
                             x-transition:enter="transition ease-out duration-200"
                             x-transition:enter-start="opacity-0 scale-95"
                             x-transition:enter-end="opacity-100 scale-100"
                             class="w-[calc(50%-12px)] sm:w-[calc(33.333%-16px)] md:w-[calc(25%-18px)] lg:w-[calc(20%-20px)]">
                            {{ partner_card(partner, category) }}
                        </div>
                    {% endfor %}
                {% endfor %}
            </div>

            {# Bouton d'action #}
            <div class="text-center mt-12">
                <a href="https://events-qualitas-ci.com/qshe25-b2b/public/" 
                   class="inline-flex items-center bg-brand-blue hover:bg-brand-blue-dark text-white font-bold py-3 px-6 rounded-lg transition-colors duration-300"
                   target="_blank"
                   rel="noopener noreferrer">
                    <i class="fas fa-handshake mr-2"></i>
                    <span>Devenir Partenaire</span>
                </a>
            </div>
        </div>
    </div>
</section>
